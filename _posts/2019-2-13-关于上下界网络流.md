---
layout: post
title: 2019-2-13 关于上下界网络流

date: 2019-2-13
categories: blog
tags: [BZOJ,2502]
description: 
---

---------------------


看了网上众多关于上下界网络流的总结总是分类分的好复杂

然后像我这种怎么记得住嘛。。。。。

于是我就找了一个我觉得我能记得住的。。

# 无源汇点有上下界可行流

定义是说所有点的流入量等于流出量（就是自己流自己）

这类问题一般在问可行流，就是给出一种方式使这种循环流量成立

那么

对于有向边<a href="https://www.codecogs.com/eqnedit.php?latex=x&space;\rightarrow&space;y" target="_blank"><img src="https://latex.codecogs.com/gif.latex?x&space;\rightarrow&space;y" title="x \rightarrow y" /></a>，这条边流量范围是[L..R]

那么连线<a href="https://www.codecogs.com/eqnedit.php?latex=SS&space;\rightarrow&space;y" target="_blank"><img src="https://latex.codecogs.com/gif.latex?SS&space;\rightarrow&space;y" title="SS \rightarrow y" /></a>，容量是L，<a href="https://www.codecogs.com/eqnedit.php?latex=x&space;\rightarrow&space;TT" target="_blank"><img src="https://latex.codecogs.com/gif.latex?x&space;\rightarrow&space;TT" title="x \rightarrow TT" /></a>，容量也是L，以及<a href="https://www.codecogs.com/eqnedit.php?latex=x&space;\rightarrow&space;y" target="_blank"><img src="https://latex.codecogs.com/gif.latex?x&space;\rightarrow&space;y" title="x \rightarrow y" /></a>，容量为R - L

然后跑SS,TT最大流，如果所有和SS连的边都满流了，那么就存在可行流啦

这怎么理解呢。。。这不好理解

可以理解做把边的下届强行调成0，上界变成R - L，然而会导致一个点的入流量不等于出流量

那么我们把这个点原来入流下界和减去原来出流下界和

这有点绕口，如果大于0，则SS向它连一条容量为差值的边，如果小于0，则向TT连一条容量为差值的边

这就相当于先强行流了个L，然后再看看有没有办法把他搞成流量平衡

如果我们连的差值边全都跑满了，那自然就是有解的咯

# 有源汇点有上下界最大（小）流

我们转变下想法，给出流量w，检查其是否可行

那么按上面一样建图，然后连一条T -> S,容量为w的边

注意，S,T是原图的源汇点，不是SS,TT

然后跑最大流，看所有和SS连的边是否都满流，都满流就可行

